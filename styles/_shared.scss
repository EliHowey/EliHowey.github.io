$inline-element-padding: 0.1em;

/* ========================================
 * CSS Variables
 * ======================================== */
:root {
	/* Helper Colors */
	--gray-dark: hsl(210, 25%, 12%);
	--gray-light: hsl(0, 0%, 50%);
	--white: hsl(0, 0%, 100%);

	/* Neutrals */
	--background: var(--white);
	--on-background: var(--gray-dark);

	--focus-background: hsl(56, 100%, 68%);
	--on-focus-background: var(--gray-dark);

	--code-background: hsl(240, 14%, 97%);
	--on-code-background: hsl(357, 62%, 56%);

	--highlight-background: hsl(56, 100%, 68%);

	--label: var(--gray-light);

	/* Font Scale (Harmonic) */
	--font-scale: 1.15;
	--size-down-2: calc(var(--size-down-1) / var(--font-scale));
	--size-down-1: calc(var(--size-base) / var(--font-scale));
	--size-base: 1rem;
	--size-up-1: calc(var(--size-base) * var(--font-scale));
	--size-up-2: calc(var(--size-up-1) * var(--font-scale));
	--size-up-3: calc(var(--size-up-2) * var(--font-scale));
	--size-up-4: calc(var(--size-up-3) * var(--font-scale));
	--size-up-5: calc(var(--size-up-4) * var(--font-scale));
}

@media (prefers-color-scheme: dark) {
	:root {
		--background: var(--gray-dark);
		--on-background: var(--white);

		--code-background: hsl(240, 12%, 3%);
		--on-code-background: hsl(357, 62%, 56%);
	}
}

/* ========================================
 * Resets
 * ======================================== */
* {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

/* ========================================
 * Utilities
 * ======================================== */
.visually-hidden {
	position: absolute;
	height: 1px;
	width: 1px;
	border: 0;
	top: 0;
	left: 0;
	clip: rect(0 0 0 0);
}

.label {
	font-size: 0.83em;
	font-weight: 300;
	color: var(--label);
}

.float-right {
	float: right;
	shape-outside: border-box;
	padding-left: 1em;
	padding-bottom: 1em;
}

/* ========================================
 * Defaults
 * ======================================== */
html {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
		Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
		"Segoe UI Symbol";
	font-size: 20px;
	line-height: 1.66;
	color: var(--on-background);
	background-color: var(--background);
}

h1,
h2,
h3,
h4,
h5,
h6 {
	line-height: 1.25;
	font-weight: 600;
}

h1 {
	font-size: var(--size-up-5);
}

h2 {
	font-size: var(--size-up-4);
}

h3 {
	font-size: var(--size-up-3);
}

h4 {
	font-size: var(--size-up-2);
}

h5 {
	font-size: var(--size-up-1);
}

h6 {
	font-size: var(--size-base);
}

/* Page Navigation */
nav,
nav ul {
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: baseline;
}

nav li {
	list-style-type: none;
	margin-right: 1em;

	&:last-child {
		margin-right: 0;
	}
}

/* Links */
a {
	color: inherit;

	&:hover,
	&:focus {
		color: var(--on-focus-background);
		background-color: var(--focus-background);
	}

	&:focus {
		outline: 2px dotted hotpink;
	}
}

.homepage-link {
	flex: 1 0 max-content;
	padding-right: 1rem; // Space between this link and the <nav> links

	a {
		margin: 0;
		padding: 0;
		text-decoration: none;
	}
}

#skip-to-content-link:focus {
	box-sizing: content-box;
	height: unset;
	width: unset;
	clip: unset;
	left: 50%;
	transform: translateX(-50%);
	padding: 0.5em 1em;
	border-radius: 0 0 0.5em 0.5em;
}

/* Semantic Markers */
abbr {
	text-decoration: underline dotted;
}

hr {
	background-color: var(--on-background);
}

mark {
	background-color: var(--highlight-background);
}

strong {
	font-weight: bold; // Firefox doesn't have this in the UA stylesheet
}

/* Quotes */
q::before,
q::after,
blockquote::before,
blockquote::after {
	font-weight: 700;
}

blockquote {
	font-size: 1.75em;
	text-align: center;

	&::before {
		content: open-quote;
		margin-right: $inline-element-padding;
	}

	&::after {
		content: close-quote;
		margin-left: $inline-element-padding;
	}

	& + cite {
		display: block;
		margin: 0;
		text-align: right;

		&::before {
			content: "â€“ ";
		}
	}
}

/* Images and Figures */
figure,
img {
	display: block;
	max-width: 100%;
	margin-left: auto;
	margin-right: auto;
}

figcaption {
	padding: 0.5em 0;
	border-top: 1px solid var(--background);
	font-size: 0.8em;
	text-align: center;
	color: var(--background);
	background-color: var(--on-background);
}

/* Tables */
table {
	margin: auto;
	width: 100%;
	border-collapse: collapse;
	font-size: var(--size-down-1);
}

caption {
	font-size: var(--size-down-2);
	font-weight: bold;
	text-transform: uppercase;
	letter-spacing: 1px;
}

tfoot {
	border-top: 1px solid;
}

tfoot,
th {
	font-weight: 600;
}

th,
td {
	padding: 0 5px;
	text-align: left;
}

.numeric {
	text-align: right;
}

/* Code Formatting */
pre,
code,
samp,
kbd,
pre[data-lang]::before {
	font-family: Fira Code, Liberation Mono, SFMono-Regular, Consolas, Monaco,
		"Andale Mono", "Ubuntu Mono", Menlo, Courier, monospace;
	font-size: var(--size-down-1);
}

pre,
:not(pre) > code,
samp,
kbd,
mark {
	padding: 0 $inline-element-padding;
	border-radius: 3px;
}

code {
	color: var(--on-code-background);
	background-color: var(--code-background);
}

samp {
	color: rgb(119, 251, 76);
	background-color: black;
}

kbd {
	margin: 0 2px;
	border: 1px solid var(--on-background);
	box-shadow: 1px 1px 1px var(--gray-dark); // Avoid white shadows in dark theme
}

pre {
	$code-block-padding: 1em;

	max-width: 100%;
	padding: $code-block-padding;

	// ... with a language identifier badge
	&[data-lang] {
		padding-top: 2 * $code-block-padding;

		&::before {
			content: attr(data-lang);
			position: absolute;
			margin-top: -2.5 * $code-block-padding;
			margin-bottom: $code-block-padding;
			margin-left: $code-block-padding / -2;
			padding-left: $code-block-padding / 2;
			padding-right: $code-block-padding / 2;
			border-radius: 3px;

			color: var(--background);
			background-color: var(--on-background);
		}
	}
}

/* Shared Page Layout */
$max-page-width: 1200px;
$page-padding: 3rem;
$grid-gap: 1rem;

body {
	min-height: 100vh;
	display: grid;
	grid-template-rows: max-content auto max-content;
	grid-gap: $grid-gap;
	padding-left: $page-padding;
	padding-right: $page-padding;

	> * {
		width: 100%;
		max-width: $max-page-width;
		margin-left: auto;
		margin-right: auto;
	}

	> header,
	> footer {
		padding-top: $page-padding;
		padding-bottom: $page-padding;
	}

	> footer {
		display: flex;
		justify-content: space-between;
		align-items: baseline;
		color: var(--on-background);
		background-color: var(--background);
	}
}
